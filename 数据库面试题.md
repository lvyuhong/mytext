## 数据库面试题

> 1、索引分类，索引失效条件 
>
> 普通索引：最基本的索引，没有任何限制 
> 唯一索引：与”普通索引”类似，不同的就是：索引列的值必须唯一，但允许有空值。 
> 主键索引：它是一种特殊的唯一索引，不允许有空值。 
> 全文索引：针对较大的数据，生成全文索引很耗时好空间。 
> 组合索引：为了更多的提高mysql效率可建立组合索引，遵循”最左前缀“原则 
> 失效条件 
> 条件是or,如果还想让or条件生效，给or每个字段加个索引 
> like查询，以%开发 
> 内部函数 
> 对索引列进行计算 
> is null不会用，is not null 会用

> 2、数据库的主从复制 
> 默认异步复制，容易造成主库数据和从库不一致 
> 一个数据库为Master,一个数据库为slave,通过Binlog日志 
> slave两个线程，一个线程去读master binlog日志，写到自己的中继日志 
> 一个线程解析日志，执行sql 
> master启动一个线程 
> 给slave传递binlog日志
>
> 半同步复制 
> 只有把master发送的binlog日志写到slave的中继日志，这时主库 
> 才返回操作完成的反馈，性能有一定降低
>
> 并行复制 
> slave 多个线程去请求binlog日志

> *3、关系型数据库和非关系型数据库区别*
> 数据库 
> 类型 特性 
> 关系型数据库mysql 
> 1、关系型数据库，是指采用了关系模型来组织数据的数据库, 
> 2.关系型数据库的最大特点就是事务的一致性；
> 优点
> 1、容易理解：二维表结构是非常贴近逻辑世界一个概念，关系模型相对网状、层次等其他模型来说更容易理解；
> 2、使用方便：通用的SQL语言使得操作关系型数据库非常方便；
> 3、易于维护：丰富的完整性(实体完整性、参照完整性和用户定义的完整性)大大减低了数据冗余和数据不一致的概率；
> 4、支持SQL，可用于复杂的查询。 
> 缺点
> 1、为了维护一致性所付出的巨大代价就是其读写性能比较差；
> 2、固定的表结构；
> 3、不支持高并发读写需求；
> 4、不支持海量数据的高效率读写；

> 非关系型数据库 特性 
> HBase 1、使用键值对存储数据； 
> 2、分布式； 
> 优点 
> 无需经过sql层的解析，读写性能很高 
> 基于键值对，数据没有耦合性，容易扩展 
> 存储数据的格式：nosql的存储格式是key,value形式 
> 缺点 
> 不支持事务 
> 不提供sql支持

4、数据库中join的inner join, outer join, cross join 

5、最左匹配原则 
最左匹配原则是针对索引的 
举例来说：两个字段（name,age）建立联合索引，如果where age=12这样的话，是没有利用到索引的，这里我们可以简单的理解为先是对name字段的值排序，然后对age的数据排序，如果直接查age的话，这时就没有利用到索引了，查询条件where name=’xxx’ and age=xx 这时的话，就利用到索引了，再来思考下where age=xx and name=’xxx‘ 这个sql会利用索引吗，按照正常的原则来讲是不会利用到的，但是优化器会进行优化，把位置交换下。这个sql也能利用到索引了

6、什么是主键?什么是外键?

主键是表格里的(一个或多个)字段，只用来定义表格里的行;主键里的值总是唯一的。外键是一个用来建立两个表格之间关系的约束。这种关系一般都涉及一个表格里的主键字段与另外一个表格(尽管可能是同一个表格)里的一系列相连的字段。那么这些相连的字段就是外键。

7、说说你对索引的认识（索引的结构、对dml影响、对查询影响、为什么提高查询性能）
索引有B-TREE、BIT、CLUSTER等类型。ORACLE使用了一个复杂的自平衡B-tree结构;通常来说，在表上建立恰当的索引，查询时会改 进查询性能。但在进行插入、删除、修改时，同时会进行索引的修改，在性能上有一定的影响。有索引且查询条件能使用索引时，数据库会先度取索引，根据索引内容和查询条件，查询出ROWID，再根据ROWID取出需要的数据。由于索引内容通常比全表内容要少很多，因此通过先读索引，能减少I/O，提高查询性 能。

b-tree index/bitmap index/function index/patitionalindex(local/global)索引通常能提高select/update/delete的性能,会降低insert的速度

8、索引是什么？有什么作用以及优缺点？

MySQL数据库几个基本的索引类型：普通索引、唯一索引、主键索引、全文索引
- 索引加快数据库的检索速度
- 索引降低了插入、删除、修改等维护任务的速度
- 唯一索引可以确保每一行数据的唯一性
- 通过使用索引，可以在查询的过程中使用优化隐藏器，提高系统的性能
- 索引需要占物理和数据空间 

9、drop、delete与truncate分别在什么场景之下使用？

不再需要一张表的时候，用drop
想删除部分数据行时候，用delete，并且带上where子句
保留表而删除所有数据的时候用truncate

10、超键、候选键、主键、外键分别是什么？

超键：在关系中能唯一标识元组的属性集称为关系模式的超键。一个属性可以为作为一个超键，多个属性组合在一起也可以作为一个超键。超键包含候选键和主键。

候选键：是最小超键，即没有冗余元素的超键。

主键：数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（Null）。

外键：在一个表中存在的另一个表的主键称此表的外键。

> 11、为什么要给表加上主键？为什么加索引后会使查询变快？为什么加索引后会使写入、修改、删除变慢？什么情况下要同时在两个字段上建索引？
>
>